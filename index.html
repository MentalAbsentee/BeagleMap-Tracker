<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana Wallet Bubble Map</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #000;
            font-family: Arial, sans-serif;
        }
        #canvas {
            display: block;
        }
        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            max-width: 90%;
            overflow-x: auto;
        }
        @media (max-width: 768px) {
            #ui {
                top: 5px;
                left: 5px;
                padding: 5px;
                font-size: 12px;
            }
            input, button {
                font-size: 12px;
                padding: 5px;
            }
        }
        input, button {
            margin: 5px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="ui">
        <div id="auth">
            <h3 style="color: white; margin: 0 0 10px 0;">Optional Login</h3>
            <input type="text" id="username" placeholder="Username (optional)">
            <button id="login">Login</button>
            <button id="guestLogin" style="margin-left: 10px;">Continue as Guest</button>
            <p style="color: #ccc; font-size: 12px; margin: 10px 0 0 0;">
                Login to save your settings and notes, or continue as guest.
            </p>
        </div>
        <div id="main-ui" style="display: none;">
            <input type="text" id="search" placeholder="Search wallets">
            <input type="number" id="minBalance" placeholder="Min balance">
            <input type="number" id="maxBalance" placeholder="Max balance">
            <select id="filterType">
                <option value="balance">Balance</option>
                <option value="activity">Activity</option>
                <option value="connections">Connections</option>
            </select>
            <select id="proxySelect">
                <option value="0">Direct</option>
                <option value="1">CORS Anywhere</option>
                <option value="2">All Origins</option>
            </select>
            <br><br>
            <label>Transaction Threshold: <span id="thresholdValue">1.0</span> SOL</label>
            <input type="range" id="thresholdSlider" min="0.1" max="10" step="0.1" value="1.0">
            <br>
            <label>Update Interval: <span id="intervalValue">60</span> seconds</label>
            <input type="range" id="intervalSlider" min="10" max="300" step="10" value="60">
            <br>
            <label>
                <input type="checkbox" id="alertsToggle" checked> Enable AI Alerts
            </label>
            <label>
                <input type="checkbox" id="rugDetectionToggle" checked> Rug-Pull Detection
            </label>
            <label>
                <input type="checkbox" id="dumpDetectionToggle" checked> Dump Detection
            </label>
            <label>
                <input type="checkbox" id="mevDetectionToggle" checked> MEV Bot Detection
            </label>
            <br>
            <button id="save">Save Data</button>
            <button id="export">Export Data</button>
            <button id="share">Share View</button>
            <input type="text" id="shareKey" placeholder="Share key">
            <button id="loadShared">Load Shared</button>
            <button id="logout">Logout</button>
            <button id="notes">Notes</button>
            <button id="help">Help</button>
            <button id="toggleChat">AI Chat</button>
        </div>
        <div id="chat" style="display: none; position: absolute; bottom: 10px; right: 10px; width: 300px; height: 400px; background: rgba(0,0,0,0.8); color: white; padding: 10px; border-radius: 5px; overflow-y: auto;">
            <div id="chatMessages" style="height: 300px; overflow-y: auto; margin-bottom: 10px;"></div>
            <input type="text" id="chatInput" placeholder="Ask the AI..." style="width: 70%; margin-right: 5px;">
            <button id="sendChat">Send</button>
        </div>
        <div id="notesDialog" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 400px; height: 300px; background: rgba(0,0,0,0.9); color: white; padding: 20px; border-radius: 5px; border: 1px solid #333;">
            <h3>Shared Notes</h3>
            <textarea id="notesText" placeholder="Leave notes for other users..." style="width: 100%; height: 180px; background: #222; color: white; border: 1px solid #555; padding: 5px; resize: none;"></textarea>
            <br><br>
            <button id="saveNotes">Save Notes</button>
            <button id="closeNotes" style="margin-left: 10px;">Close</button>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="app.js"></script>
</body>
</html>